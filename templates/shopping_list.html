{% extends "base.html" %}
{% block title %}Shopping List{% endblock %}

{% block content %}
<h2>ðŸ›’ Shopping List</h2>

{% if shopping %}
  {% set categorized = {} %}
  {% for item in shopping %}
    {% set cat = item.category or "Uncategorized" %}
    {% if cat not in categorized %}
      {% set _ = categorized.update({cat: []}) %}
    {% endif %}
    {% set _ = categorized[cat].append(item) %}
  {% endfor %}

  {% for cat in categorized|dictsort %}
    <h4>{{ cat[0] }}</h4>
    <ul class="shopping-list">
      {% for item in cat[1] %}
        <li>{{ item.name }} (Need {{ item.par - item.quantity }})</li>
      {% endfor %}
    </ul>
  {% endfor %}
{% else %}
  <p>No items needed. You're fully stocked!</p>
{% endif %}

<div class="back-btn-wrapper">
  <a href="/dashboard" class="btn">â¬… Back to Dashboard</a>
</div>
{% endblock %}
