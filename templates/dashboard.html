{% extends "base.html" %}
{% block title %}Dashboard{% endblock %}

{% block content %}
<h2>Hello, {{ session.username }}!</h2>

<form method="post">
  <input name="name" placeholder="Item Name" required>
  <input name="quantity" type="number" placeholder="Quantity" required>
  <input name="par" type="number" placeholder="Par Level" required>
  <input name="expiration" type="date" placeholder="Expiration Date (optional)">
  <button type="submit">Add Item</button>
</form>

<h3>Inventory</h3>
{% if items %}
  {% for item in items %}
    <div class="item">
      <div>
        <strong>{{ item.name }}</strong>: {{ item.quantity }} (Par: {{ item.par }})
        {% if item.expiration %}
          <div>ğŸ“… Expires: {{ item.expiration.strftime('%Y-%m-%d') if item.expiration else '' }}</div>
        {% endif %}
      </div>
      <a href="/delete/{{ item._id }}">ğŸ—‘ï¸</a>
    </div>
  {% endfor %}
  <a href="/clear-inventory" class="btn" onclick="return confirm('Are you sure you want to clear your entire inventory?');">
    ğŸ§¹ Clear Inventory
  </a>
{% else %}
  <p>No items found.</p>
{% endif %}

<h3 style="margin-top: 2rem;">Shopping List</h3>
{% if shopping %}
  {% for item in shopping %}
    <p>ğŸ›’ {{ item.name }} (Need {{ item.par - item.quantity }})</p>
  {% endfor %}
{% else %}
  <p>All stocked up!</p>
{% endif %}
{% endblock %}
