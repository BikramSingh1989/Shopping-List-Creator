{% extends "base.html" %}

{% block title %}Dashboard - Inventory{% endblock %}

{% block content %}
<h2>Welcome, {{ session['username'] }} 👋</h2>

<h3>Add Inventory Item</h3>
<form method="POST">
  <label for="name">Item Name</label>
  <input type="text" name="name" placeholder="e.g. Canned Beans" required>
  <small>Enter the name of the item you're tracking.</small>

  <label for="quantity">Quantity</label>
  <input type="number" name="quantity" placeholder="e.g. 3" min="0" required>
  <small>How many you currently have on hand.</small>

  <label for="par">Par Level</label>
  <input type="number" name="par" placeholder="e.g. 5" min="0" required>
  <small>Minimum amount you want to keep in stock.</small>

  <label for="expiration">Expiration Date</label>
  <input type="date" name="expiration">
  <small>Optional: best-by or expiration date (if applicable).</small>

  <button type="submit">➕ Add Item</button>
</form>

<h3>Your Inventory</h3>
{% if items %}
  {% for item in items %}
    <div class="item">
      <div>
        <strong>{{ item.name }}</strong><br>
        Quantity: {{ item.quantity }}<br>
        Par: {{ item.par }}<br>
        {% if item.expiration %}
          Exp: {{ item.expiration.strftime('%Y-%m-%d') }}
        {% else %}
          Exp: N/A
        {% endif %}
      </div>
      <a href="/delete/{{ item._id }}" onclick="return confirm('Delete this item?');">🗑️</a>
    </div>
  {% endfor %}
{% else %}
  <p>You have no items in inventory. Start adding!</p>
{% endif %}

<div class="clear-btn-wrapper">
  <a href="/clear-inventory" class="btn" onclick="return confirm('Are you sure you want to clear your entire inventory?');">
    🧹 Clear Inventory
  </a>
</div>

<h3>Shopping List</h3>
{% if shopping %}
  <ul>
    {% for item in shopping %}
      <li>🛒 {{ item.name }} (Need {{ item.par - item.quantity }})</li>
    {% endfor %}
  </ul>
{% else %}
  <p>🎉 You're fully stocked!</p>
{% endif %}
{% endblock %}
